"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[460],{5460:(t,s,a)=>{a.r(s),a.d(s,{default:()=>i});const e={data:function(){return{historyData:{},machineData:{},isLoading:!0,moment,parts:[]}},methods:{getHistoryData:function(){var t=this;axios.get("/admin/api/service-history-details?machineId=".concat(this.$route.params.machineId,"&historyId=").concat(this.$route.params.serviceId)).then((function(t){return t.data})).then((function(s){"ok"==s.status?(t.isLoading=!1,t.historyData=s.service,t.machineData=s.machine,t.parts=s.parts):t.$router.go(-1)})).catch((function(s){t.$router.go(-1),console.error(s.response.data)}))},deleteServicePhoto:function(t,s){var a=this;swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(e){e.isConfirmed&&axios.post("/admin/api/delete-service-photo",{photoId:s}).then((function(t){return t.data})).then((function(s){"ok"==s.status&&(swal.fire("Success",s.msg,"success"),a.historyData.photos.splice(t,1))})).catch((function(t){console.error(t.response.data)}))}))}},mounted:function(){this.getHistoryData()}};const i=(0,a(1900).Z)(e,(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"content-header"},[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row mb-2"},[t._m(0),t._v(" "),a("div",{staticClass:"col-sm-6"},[a("ol",{staticClass:"breadcrumb float-sm-right"},[a("li",{staticClass:"breadcrumb-item"},[a("router-link",{attrs:{to:{name:"machine.info",params:{id:t.$route.params.machineId}}}},[t._v(t._s(t.machineData.title))])],1),t._v(" "),a("li",{staticClass:"breadcrumb-item active"},[t._v("Service History")])])])])])])]),t._v(" "),a("div",{staticClass:"col-md-7"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header d-flex justify-content-end"},[a("router-link",{staticClass:"btn btn-sm btn-primary",attrs:{to:{name:"machine.edit-service",params:{serviceId:t.$route.params.serviceId,machineId:t.$route.params.machineId}}}},[t._v("Edit "),a("i",{staticClass:"fas fa-edit"})])],1),t._v(" "),a("div",{staticClass:"card-body"},[t._m(1),t._v(" "),a("div",{staticClass:"form-group"},[a("div",{staticClass:"mb-4 ml-2 badge badge-primary"},[t._v("Bottom SL : "+t._s(t.machineData.bottom_sl))]),t._v(" "),a("div",{staticClass:"mb-4 ml-2 badge badge-secondary"},[t._v("Top SL : "+t._s(t.machineData.top_sl))]),t._v(" "),a("div",{staticClass:"mb-4 ml-2 badge badge-warning"},[t._v("Label Number : "+t._s(t.machineData.label_number))])]),t._v(" "),t.isLoading?a("div",{staticClass:"row mt-5"},t._l(9,(function(s){return a("div",{key:s,staticClass:"col-md-4 mb-4"},[a("skeleton",{attrs:{width:"40%",height:"25px"}}),t._v(" "),a("skeleton",{attrs:{width:"100%",height:"20px"}}),t._v(" "),a("skeleton",{attrs:{width:"100%",height:"20px"}})],1)})),0):a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col-4 mb-4"},[t._m(2),t._v(" "),a("p",{staticClass:"text-muted"},[t._v(t._s(t.moment(t.historyData.serviceDate).format("MM/DD/YYYY")))])]),t._v(" "),a("div",{staticClass:"col-4 mb-4"},[t._m(3),t._v(" "),a("p",{staticClass:"text-muted"},[t._v(t._s(t.historyData.serviceType))])]),t._v(" "),a("div",{staticClass:"col-4 mb-4"},[t._m(4),t._v(" "),a("p",{staticClass:"text-muted"},[t._v(t._s(t.historyData.techName))])]),t._v(" "),a("div",{staticClass:"col-md-12 mb-4"},[t._m(5),t._v(" "),a("p",{staticClass:"text-muted"},[t._v(t._s(t.historyData.description))])])])])])]),t._v(" "),a("div",{staticClass:"col-md-5"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[t._m(6),t._v(" "),t.isLoading?a("div",{staticClass:"row mt-5"},t._l(4,(function(t){return a("div",{key:t,staticClass:"col-md-6 mb-4"},[a("skeleton",{attrs:{width:"100%",height:"200px"}})],1)})),0):a("div",{staticClass:"row mt-5"},[t.historyData.photos.length<=0?[t._m(7)]:t._l(t.historyData.photos,(function(s,e){return a("div",{key:e,staticClass:"col-md-6 mb-4"},[a("img",{staticClass:"service-photo",attrs:{src:"/admin/api/resources/photos/service/"+s.img,alt:""}}),t._v(" "),a("button",{staticClass:"btn btn-sm btn-danger",on:{click:function(a){return t.deleteServicePhoto(e,s.id)}}},[a("i",{staticClass:"fas fa-trash"})])])}))],2)])])]),t._v(" "),"yes"==t.historyData.needParts?a("div",{staticClass:"col-md-7"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[t._m(8),t._v(" "),a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-bordered"},[t._m(9),t._v(" "),a("tbody",[t.parts.length<=0?[t._m(10)]:t._l(t.parts,(function(s,e){return a("tr",{key:e},[a("td",[t._v(t._s(e+1))]),t._v(" "),a("td",[a("b",[t._v(t._s(s.name))])]),t._v(" "),a("td",[t._v(t._s(s.part_number))]),t._v(" "),a("td",[t._v(t._s(s.vendor))]),t._v(" "),a("td",["need_to_order"==s.status?a("span",{staticClass:"badge badge-warning"},[a("i",{staticClass:"fas fa-clock"}),t._v(" Need to order")]):"ordered"==s.status?a("span",{staticClass:"badge badge-pending"},[a("i",{staticClass:"fas fa-check"}),t._v(" Ordered")]):"shipped"==s.status?a("span",{staticClass:"badge badge-shipped"},[a("i",{staticClass:"fas fa-truck"}),t._v(" Shipped")]):"installed"==s.status?a("span",{staticClass:"badge badge-success"},[a("i",{staticClass:"fas fa-check-circle"}),t._v(" Installed")]):t._e()]),t._v(" "),a("td",["installed"==s.status?a("span",[t._v(t._s(t.moment(s.updated_at).format("MM-DD-YYYY")))]):a("span",[t._v("Not installed yet")])]),t._v(" "),a("td",[a("router-link",{staticClass:"btn btn-sm btn-secondary",attrs:{to:{name:"edit-part",params:{partId:s.id}}}},[t._v("View / Edit")])],1)])}))],2)])])])])]):t._e()])}),[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"col-sm-6"},[a("h1",{staticClass:"m-0"},[t._v("Service History")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"form-group"},[a("h4",[t._v("Service Details")]),t._v(" "),a("hr")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("h5",[a("b",[t._v("Service Date")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("h5",[a("b",[t._v("Service Type")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("h5",[a("b",[t._v("Technician Name")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("h5",[a("b",[t._v("Service Description")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"form-group"},[a("h4",[t._v("Service Photos")]),t._v(" "),a("hr")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"col-md-12 text-center"},[a("h4",{staticClass:"text-danger"},[t._v("No photos available")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"form-group"},[a("h4",[t._v("Parts List")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("thead",[a("tr",[a("th",[t._v("SL No.")]),t._v(" "),a("th",[t._v("Part name")]),t._v(" "),a("th",[t._v("Part number")]),t._v(" "),a("th",[t._v("vendor")]),t._v(" "),a("th",[t._v("status")]),t._v(" "),a("th",[t._v("Installation date")]),t._v(" "),a("th",[t._v("Action")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("tr",[a("td",{staticClass:"text-center",attrs:{colspan:"6"}},[a("span",{staticClass:"text-muted"},[t._v("No parts were assigned")])])])}],!1,null,null,null).exports}}]);