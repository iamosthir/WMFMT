"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[829],{1829:(t,a,e)=>{e.r(a),e.d(a,{default:()=>n});var s=e(9669),i=e.n(s);const r={data:function(){return{customerData:{},machineData:{}}},methods:{verifyCustomerId:function(){var t=this;i().get("/admin/api/check-customer-info",{params:{customerId:this.$route.params.customerId}}).then((function(t){return t.data})).then((function(a){"ok"==a.status?(t.customerData=a.customer,t.getCustomerMachines()):t.$router.push({name:"customer.list"})})).catch((function(a){console.error(a.response.data),t.$router.push({name:"customer.list"})}))},getCustomerMachines:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;i().get("/admin/api/get-customer-machines?page="+a,{params:{customerId:this.$route.params.customerId}}).then((function(t){return t.data})).then((function(a){t.machineData=a})).catch((function(t){console.error(t.response.data)}))},deleteMachine:function(t,a){var e=this;swal.fire({title:"Are you sure?",text:"This will delete all service records as well",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(s){s.isConfirmed&&i().post("/admin/api/delete-machine",{machineId:a}).then((function(t){return t.data})).then((function(a){console.log(a),"ok"==a.status&&(swal.fire("Success",a.msg,"success"),e.machineData.data.splice(t,1))})).catch((function(t){console.error(t.response.data)}))}))}},mounted:function(){this.verifyCustomerId()}};const n=(0,e(1900).Z)(r,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"content-header"},[e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"row mb-2"},[t._m(0),t._v(" "),e("div",{staticClass:"col-sm-6"},[e("ol",{staticClass:"breadcrumb float-sm-right"},[e("li",{staticClass:"breadcrumb-item"},[e("router-link",{attrs:{to:{name:"dashboard"}}},[t._v("Home")])],1),t._v(" "),e("li",{staticClass:"breadcrumb-item active"},[t._v("Customer Profile")])])])])])])]),t._v(" "),e("div",{staticClass:"col-md-4"},[e("div",{staticClass:"card"},[t._m(1),t._v(" "),e("div",{staticClass:"card-body"},[e("p",[e("b",[t._v("Customer Name :  ")]),t._v(" "+t._s(t.customerData.name))]),t._v(" "),e("p",[e("b",[t._v("Email :  ")]),t._v(" "+t._s(t.customerData.email||"Didn't set"))]),t._v(" "),e("p",[e("b",[t._v("Customer phone :  ")]),t._v(" "+t._s(t.customerData.phone))]),t._v(" "),e("p",[e("b",[t._v("Customer address :  ")]),t._v(" "+t._s(t.customerData.address))])])])]),t._v(" "),e("div",{staticClass:"col-md-8"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-header"},[e("h4",{staticClass:"text-muted float-left"},[t._v("Machine List")]),t._v(" "),e("router-link",{staticClass:"btn btn-sm btn-secondary float-right",attrs:{to:{name:"customer.import-sheet",params:{customerId:t.customerData.id}}}},[t._v("Import machines "),e("small",[t._v("(excel files)")])])],1),t._v(" "),e("div",{staticClass:"card-body"},[e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table table-bordered table-hover"},[t._m(2),t._v(" "),e("tbody",[t.machineData.data.length>0?t._l(t.machineData.data,(function(a,s){return e("tr",{key:s},[e("td",[t._v(t._s(a.title))]),t._v(" "),e("td",[t._v(t._s(a.manufacturer))]),t._v(" "),e("td",[e("span",{staticClass:"badge badge-pill badge-warning"},[t._v(t._s(a.model))])]),t._v(" "),e("td",[e("span",{staticClass:"badge badge-pill badge-primary"},[t._v(t._s(a.bottom_sl))])]),t._v(" "),e("td",[e("span",{staticClass:"badge badge-pill badge-secondary"},[t._v(t._s(a.top_sl))])]),t._v(" "),e("td",[e("span",{staticClass:"badge badge-pill badge-success"},[t._v(t._s(a.label_number))])]),t._v(" "),[null==a.last_service?e("td",[t._v("Never")]):e("td",[t._v(t._s(t.moment(a.last_service.created_at).format("MM / DD / YYYY")))])],t._v(" "),e("td",[e("button",{staticClass:"mb-2 btn btn-sm btn-secondary dropdown-toggle",attrs:{type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v("\n                                          Actions\n                                      ")]),t._v(" "),e("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuButton"}},[e("router-link",{staticClass:"dropdown-item",attrs:{to:{name:"machine.info",params:{id:a.id}}}},[e("i",{staticClass:"fas fa-eye"}),t._v(" Details")]),t._v(" "),a.last_service?e("router-link",{staticClass:"dropdown-item",attrs:{to:{name:"machine.serviceHistory",params:{machineId:a.last_service.machine_id,serviceId:a.last_service.id}}}},[e("i",{staticClass:"fas fa-eye"}),t._v(" Last Service Details")]):t._e(),t._v(" "),e("router-link",{staticClass:"dropdown-item",attrs:{to:{name:"machine.service-record.add",params:{machineId:a.id}}}},[e("i",{staticClass:"fas fa-plus"}),t._v(" Add Service Record")]),t._v(" "),e("router-link",{staticClass:"dropdown-item text-warning",attrs:{to:{name:"machine.edit",params:{id:a.id}}}},[e("i",{staticClass:"fas fa-edit"}),t._v(" Edit Machine Info")])],1),t._v(" "),e("button",{staticClass:"mb-2 btn btn-sm btn-danger",on:{click:function(e){return t.deleteMachine(s,a.id)}}},[e("i",{staticClass:"fas fa-trash"}),t._v(" Delete")])])],2)})):void 0],2)]),t._v(" "),e("div",{staticClass:"d-flex justify-content-center"},[e("pagination",{attrs:{data:t.machineData},on:{"pagination-change-page":t.getCustomerMachines}})],1)])])])])])}),[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-sm-6"},[e("h1",{staticClass:"m-0"},[t._v("Customer Profile")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"card-header"},[e("h4",{staticClass:"text-muted"},[t._v("Profile")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",[t._v("Title")]),t._v(" "),e("th",[t._v("Manufacturer")]),t._v(" "),e("th",[t._v("Model")]),t._v(" "),e("th",[t._v("Bottom SL")]),t._v(" "),e("th",[t._v("Top SL")]),t._v(" "),e("th",[t._v("Label Number")]),t._v(" "),e("th",[t._v("Last Service Date")]),t._v(" "),e("th",[t._v("Action")])])])}],!1,null,null,null).exports}}]);