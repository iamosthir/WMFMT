"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[388],{388:(t,e,s)=>{s.r(e),s.d(e,{default:()=>o});const a={data:function(){return{bookingData:{},isLoading:!0,moment,bookingIndex:null}},methods:{triggerSlide:function(t,e){var s=this;s.isLoading=!0,$(".request-details").addClass("slide-opened");var a=t;s.bookingData=a,s.bookingIndex=e,setTimeout((function(){s.isLoading=!1}),500)},closeSlide:function(){$(".request-details").removeClass("slide-opened")},triggerDelete:function(){this.$root.$refs.DashboardComponent.deleteService(this.bookingData.id,this.bookingIndex)},triggerApprove:function(){this.$root.$refs.DashboardComponent.approvePending(this.bookingData.id,this.bookingIndex)}},created:function(){this.$root.$refs.detailsSlider=this}};var i=s(1900);const n={components:{RequestSlide:(0,i.Z)(a,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"request-details"},[s("div",{staticClass:"header"},[s("button",{staticClass:"close-btn",attrs:{title:"Close"},on:{click:t.closeSlide}},[s("i",{staticClass:"fas fa-times"})])]),t._v(" "),t.isLoading?s("div",{staticClass:"row mt-5"},[s("div",{staticClass:"col-6"},[s("skeleton",{staticClass:"mb-2",attrs:{width:"50%",height:"20px"}}),t._v(" "),s("skeleton",{staticClass:"mb-2",attrs:{width:"60%",height:"20px"}}),t._v(" "),s("skeleton",{staticClass:"mb-2",attrs:{width:"70%",height:"20px"}})],1),t._v(" "),s("div",{staticClass:"col-6"},[s("skeleton",{staticClass:"mb-2",attrs:{width:"50%",height:"20px"}}),t._v(" "),s("skeleton",{staticClass:"mb-2",attrs:{width:"60%",height:"20px"}}),t._v(" "),s("skeleton",{staticClass:"mb-2",attrs:{width:"70%",height:"20px"}})],1),t._v(" "),s("div",{staticClass:"col-12 mt-5"},[s("skeleton",{staticClass:"mb-2",attrs:{width:"50%",height:"20px"}}),t._v(" "),s("skeleton",{staticClass:"mb-2",attrs:{width:"50%",height:"20px"}}),t._v(" "),s("skeleton",{staticClass:"mb-2",attrs:{width:"60%",height:"20px"}}),t._v(" "),s("skeleton",{staticClass:"mb-2",attrs:{width:"60%",height:"20px"}}),t._v(" "),s("skeleton",{staticClass:"mb-2",attrs:{width:"100%",height:"20px"}}),t._v(" "),s("skeleton",{staticClass:"mb-2",attrs:{width:"100%",height:"20px"}}),t._v(" "),s("skeleton",{staticClass:"mb-2",attrs:{width:"80%",height:"20px"}}),t._v(" "),s("skeleton",{staticClass:"mb-2",attrs:{width:"80%",height:"20px"}}),t._v(" "),s("skeleton",{staticClass:"mb-2",attrs:{width:"70%",height:"20px"}}),t._v(" "),s("skeleton",{staticClass:"mb-2",attrs:{width:"70%",height:"20px"}}),t._v(" "),s("skeleton",{staticClass:"mb-2",attrs:{width:"100%",height:"20px"}}),t._v(" "),s("skeleton",{staticClass:"mb-2",attrs:{width:"100%",height:"20px"}})],1)]):s("div",{staticClass:"details-body"},["pending"==t.bookingData.status?s("p",{staticClass:"text-warning"},[s("i",{staticClass:"fas fa-circle"}),t._v(" Pending")]):t._e(),t._v(" "),"accepted"==t.bookingData.status?s("p",{staticClass:"text-success"},[s("i",{staticClass:"fas fa-circle"}),t._v(" Approved")]):t._e(),t._v(" "),s("h5",{staticClass:"title"},[t._v("Ticket #"+t._s(t.bookingData.id)+" "),s("small",[t._v("\n          (Date : "+t._s(t.moment(t.bookingData.created_at).format("MM-DD-YYYY hh:mm a"))+")")])]),t._v(" "),s("div",{staticClass:"info"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-6"},[s("p",[s("b",[t._v("Customer Name : ")]),t._v(" "+t._s(t.bookingData.customerName))]),t._v(" "),s("p",[s("b",[t._v("Phone : ")]),t._v(" "+t._s(t.bookingData.phone))]),t._v(" "),s("p",[s("b",[t._v("Email : ")]),t._v(" "+t._s(t.bookingData.email||"N/A"))]),t._v(" "),s("p",[s("b",[t._v("Address : ")]),t._v(" "+t._s(t.bookingData.address))]),t._v(" "),s("p",[s("b",[t._v("Subject : ")]),t._v(" "+t._s(t.bookingData.subject))])]),t._v(" "),s("div",{staticClass:"col-6"},[t._m(0),t._v(" "),s("hr"),t._v(" "),s("p",[s("b",[t._v("ID :   ")]),t._v(t._s(t.bookingData.machine.id))]),t._v(" "),s("p",[s("b",[t._v("Top SL. :   ")]),t._v(t._s(t.bookingData.machine.top_sl))]),t._v(" "),s("p",[s("b",[t._v("Bottom SL. :   ")]),t._v(t._s(t.bookingData.machine.bottom_sl))]),t._v(" "),s("p",[s("b",[t._v("Label Number :   ")]),t._v(t._s(t.bookingData.machine.label_number))])]),t._v(" "),s("div",{staticClass:"col-12"},[t._m(1),t._v(" "),s("hr"),t._v(" "),s("p",{staticClass:"details-text"},[t._v("\n              "+t._s(t.bookingData.description)+"\n            ")])]),t._v(" "),s("div",{staticClass:"col-12 mt-5"},["pending"==t.bookingData.status?s("button",{staticClass:"btn btn-sm btn-success mb-2",on:{click:t.triggerApprove}},[t._v("Approve")]):t._e(),t._v(" "),s("button",{staticClass:"btn btn-sm btn-danger mb-2",on:{click:t.triggerDelete}},[t._v("Cancel & Delete")]),t._v(" "),s("router-link",{staticClass:"btn btn-sm btn-warning mb-2",attrs:{to:{name:"machine.info",params:{id:t.bookingData.machineId}}}},[t._v("View Machine")])],1)])])])])}),[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[s("b",[t._v("Machine Info")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",{staticClass:"mt-5 text-muted"},[s("b",[t._v("Complain / Description")])])}],!1,null,null,null).exports},data:function(){return{isLoading:!0,bookings:[],paginateData:{},moment,bookingType:"pending"}},methods:{getBookings:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isLoading=!0,axios.get("/admin/api/get-pending-services-all?page=".concat(e,"&bookingType=").concat(this.bookingType)).then((function(t){return t.data})).then((function(e){t.isLoading=!1,"ok"==e.status&&(t.bookings=e.bookingData.data,t.paginateData=e.bookingData)})).catch((function(t){console.error(t.response.data)}))},approvePending:function(t,e){var s=this;axios.post("/admin/api/approve-pending-service",{serviceId:t}).then((function(t){return t.data})).then((function(t){"ok"==t.status?($(".request-details").removeClass("slide-opened"),swal.fire("Success",t.msg,"success"),s.bookings.splice(e,1)):swal.fire("Failed",t.msg,"error")})).catch((function(t){console.error(t.response.data)}))},deleteService:function(t,e){var s=this;swal.fire({title:"Are you sure?",text:"This will delete all service records as well",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(a){a.isConfirmed&&axios.post("/admin/api/cancel-pending-service",{serviceId:t}).then((function(t){return t.data})).then((function(t){"ok"==t.status&&($(".request-details").removeClass("slide-opened"),swal.fire("Success",t.msg,"success"),s.bookings.splice(e,1))})).catch((function(t){console.error(t.response.data)}))}))},openSlide:function(t){this.$root.$refs.detailsSlider.triggerSlide(t)}},mounted:function(){this.getBookings()},created:function(){this.$root.$refs.DashboardComponent=this}};const o=(0,i.Z)(n,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",[s("div",{staticClass:"row"},[t._m(0),t._v(" "),s("div",{staticClass:"col-12"},[s("div",{staticClass:"card"},[t._m(1),t._v(" "),s("div",{staticClass:"card-body"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 mb-4"},[s("div",{staticClass:"btn-group btn-group-toggle",attrs:{"data-toggle":"buttons"}},[s("label",{staticClass:"btn bg-secondary active"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.bookingType,expression:"bookingType"}],attrs:{type:"radio",name:"options",autocomplete:"off",checked:"",value:"pending"},domProps:{checked:t._q(t.bookingType,"pending")},on:{change:[function(e){t.bookingType="pending"},t.getBookings]}}),t._v(" Pendings\r\n                                ")]),t._v(" "),s("label",{staticClass:"btn bg-secondary"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.bookingType,expression:"bookingType"}],attrs:{type:"radio",name:"options",autocomplete:"off",value:"accepted"},domProps:{checked:t._q(t.bookingType,"accepted")},on:{change:[function(e){t.bookingType="accepted"},t.getBookings]}}),t._v(" Accepted\r\n                                ")])])])]),t._v(" "),t.isLoading?s("div",{staticClass:"row"},t._l(15,(function(t){return s("div",{key:t,staticClass:"col-12"},[s("skeleton",{attrs:{width:"100%",height:"30px"}})],1)})),0):[s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"table table-striped table-bordered tabler-hover"},[t._m(2),t._v(" "),s("tbody",[t.bookings.length>0?t._l(t.bookings,(function(e,a){return s("tr",{key:a},[s("td",[t._v("#"+t._s(e.id))]),t._v(" "),s("td",[t._v(t._s(e.customerName))]),t._v(" "),s("td",[t._v(t._s(e.machine.id))]),t._v(" "),s("td",[t._v(t._s(e.subject))]),t._v(" "),s("td",[t._v(t._s(t.moment(e.created_at).format("MM-DD-YYYY hh:mm a")))]),t._v(" "),s("td",["pending"==e.status?s("span",{staticClass:"badge badge-pill badge-warning"},[t._v("Pending")]):t._e(),t._v(" "),"accepted"==e.status?s("span",{staticClass:"badge badge-pill badge-success"},[t._v("Approved")]):t._e()]),t._v(" "),s("td",[s("button",{staticClass:"btn btn-sm btn-primary mb-2",on:{click:function(s){return t.openSlide(e,a)}}},[t._v("Show Details")]),t._v(" "),"pending"==e.status?s("button",{staticClass:"btn btn-sm btn-success mb-2",on:{click:function(s){return t.approvePending(e.id,a)}}},[t._v("Approve")]):t._e(),t._v(" "),s("button",{staticClass:"btn btn-sm btn-danger mb-2",on:{click:function(s){return t.deleteService(e.id,a)}}},[t._v("Cancel & Delete")]),t._v(" "),s("router-link",{staticClass:"btn btn-sm btn-warning mb-2",attrs:{to:{name:"machine.info",params:{id:e.machineId}}}},[t._v("View Machine")])],1)])})):[t._m(3)]],2)])]),t._v(" "),s("div",{staticClass:"d-flex justify-content-center"},[s("pagination",{attrs:{data:t.paginateData},on:{"pagination-change-page":t.getBookings}})],1)]],2)])])]),t._v(" "),s("RequestSlide")],1)}),[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-12"},[s("div",{staticClass:"content-header"},[s("div",{staticClass:"container-fluid"},[s("div",{staticClass:"row mb-2"},[s("div",{staticClass:"col-sm-6"},[s("h1",{staticClass:"m-0"},[t._v("Dashboard")])])])])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card-header"},[s("h4",[t._v("Service Requests")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",[t._v("Ticket ID")]),t._v(" "),s("th",[t._v("Customer Name")]),t._v(" "),s("th",[t._v("Machine ID")]),t._v(" "),s("th",[t._v("Subject")]),t._v(" "),s("th",[t._v("Created At")]),t._v(" "),s("th",[t._v("Status")]),t._v(" "),s("th",[t._v("Action")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",[s("td",{staticClass:"text-center",attrs:{colspan:"7"}},[t._v("No available service requests")])])}],!1,null,null,null).exports}}]);