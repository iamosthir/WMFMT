"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[677],{6677:(t,a,s)=>{s.r(a),s.d(a,{default:()=>i});const e={data:function(){return{isLoading:!0,machineData:{},serviceHistory:{},moment,parts:[]}},methods:{getMachineInfo:function(){var t=this;axios.get("/admin/api/get-machine-data",{params:{machineId:this.$route.params.id}}).then((function(t){return t.data})).then((function(a){t.machineData=a.machineData,t.parts=a.parts})).catch((function(t){console.error(t.response.data)}))},getServiceHistory:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isLoading=!0,axios.get("/admin/api/service-history-list?machineId=".concat(this.$route.params.id,"&page=").concat(a)).then((function(t){return t.data})).then((function(a){t.isLoading=!1,"ok"==a.status&&(t.serviceHistory=a.data)})).catch((function(t){console.error(t.response.data)}))},deleteServiceHistory:function(t,a){var s=this;swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(e){e.isConfirmed&&axios.post("/admin/api/delete-service-history",{historyId:a}).then((function(t){return t.data})).then((function(a){"ok"==a.status&&(swal.fire("Success",a.msg,"success"),s.serviceHistory.data.splice(t,1))})).catch((function(t){console.error(t.response.data)}))}))}},mounted:function(){this.getMachineInfo(),this.getServiceHistory()}};const i=(0,s(1900).Z)(e,(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[s("div",{staticClass:"content-header"},[s("div",{staticClass:"container-fluid"},[s("div",{staticClass:"row mb-2"},[s("div",{staticClass:"col-sm-6"},[s("h1",{staticClass:"m-0"},[t._v(t._s(t.machineData.title))])]),t._v(" "),s("div",{staticClass:"col-sm-6"},[s("ol",{staticClass:"breadcrumb float-sm-right"},[s("li",{staticClass:"breadcrumb-item"},[s("router-link",{attrs:{to:{name:"machine.all-list"}}},[t._v("Listed Machine")])],1),t._v(" "),s("li",{staticClass:"breadcrumb-item active"},[t._v("Information")])])])])])])]),t._v(" "),s("div",{staticClass:"col-md-6"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-header d-flex justify-content-end"},[s("router-link",{staticClass:"btn btn-sm btn-primary mr-2",attrs:{to:{name:"machine.service-record.add",params:{machineId:t.$route.params.id}}}},[s("i",{staticClass:"fas fa-plus"}),t._v(" Add Service Record")]),t._v(" "),s("router-link",{staticClass:"btn btn-sm btn-warning mr-2",attrs:{to:{name:"machine.edit",params:{id:t.$route.params.id}}}},[s("i",{staticClass:"fas fa-edit"}),t._v(" Edit")])],1),t._v(" "),s("div",{staticClass:"card-body"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-6 p-4"},[t._m(0),t._v(" "),t.machineData.machine_photo?s("div",{staticClass:"form-group"},[s("img",{staticClass:"machine-thumb",attrs:{src:"/admin/api/resources/photos/machines/"+t.machineData.machine_photo,alt:""}})]):t._e(),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-6 mt-4"},[s("h6",{staticClass:"title"},[t._v("Title")]),t._v(" "),s("p",[t._v(t._s(t.machineData.title))])]),t._v(" "),s("div",{staticClass:"col-6 mt-4"},[s("h6",{staticClass:"title"},[t._v("Manufacturer")]),t._v(" "),s("p",[t._v(t._s(t.machineData.manufacturer))])]),t._v(" "),s("div",{staticClass:"col-6 mt-4"},[s("h6",{staticClass:"title"},[t._v("Model")]),t._v(" "),s("p",[t._v(t._s(t.machineData.model))])]),t._v(" "),s("div",{staticClass:"col-6 mt-4"},[s("h6",{staticClass:"title"},[t._v("Bottom SL")]),t._v(" "),s("p",[t._v(t._s(t.machineData.bottom_sl))])]),t._v(" "),s("div",{staticClass:"col-6 mt-4"},[s("h6",{staticClass:"title"},[t._v("Top SL")]),t._v(" "),s("p",[t._v(t._s(t.machineData.top_sl))])]),t._v(" "),s("div",{staticClass:"col-6 mt-4"},[s("h6",{staticClass:"title"},[t._v("Label Number")]),t._v(" "),s("p",[t._v(t._s(t.machineData.label_number))])])])]),t._v(" "),s("div",{staticClass:"col-md-6 p-4"},[t._m(1),t._v(" "),t.machineData.customer_photo?s("div",{staticClass:"form-group text-center"},[s("img",{staticClass:"customer-thumb",attrs:{src:"/admin/api/resources/photos/customer/"+t.machineData.customer_photo,alt:""}})]):t._e(),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 mt-4 text-center"},[s("h6",{staticClass:"title"},[t._v("Customer Name")]),t._v(" "),s("p",[t._v(t._s(t.machineData.customer_name))])]),t._v(" "),s("div",{staticClass:"col-12 mt-4 text-center"},[s("h6",{staticClass:"title"},[t._v("Customer Location")]),t._v(" "),s("p",[t._v(t._s(t.machineData.customer_location))])]),t._v(" "),s("div",{staticClass:"col-12 mt-4 text-center"},[s("h6",{staticClass:"title"},[t._v("Customer Number")]),t._v(" "),s("p",[t._v(t._s(t.machineData.customer_phone))])])])])])])])]),t._v(" "),s("div",{staticClass:"col-md-6"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-body"},[t._m(2),t._v(" "),t.isLoading?s("div",{staticClass:"row"},t._l(10,(function(t){return s("div",{key:t,staticClass:"col-12"},[s("skeleton",{attrs:{width:"100%",height:"35px"}})],1)})),0):s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[s("table",{staticClass:"table table-hover table-bordered"},[t._m(3),t._v(" "),s("tbody",[t.serviceHistory.data.length<=0?[t._m(4)]:t._l(t.serviceHistory.data,(function(a,e){return s("tr",{key:e},[s("td",[t._v(t._s(t.moment(a.serviceDate).format("MM / DD / YYYY")))]),t._v(" "),s("td",[t._v(t._s(a.serviceType))]),t._v(" "),s("td",[s("b",[t._v(t._s(a.techName))])]),t._v(" "),s("td",[s("router-link",{staticClass:"btn btn-sm btn-primary",attrs:{to:{name:"machine.serviceHistory",params:{machineId:t.$route.params.id,serviceId:a.id}},title:"View"}},[s("i",{staticClass:"fas fa-eye"})]),t._v(" "),s("button",{staticClass:"btn btn-sm btn-danger",attrs:{title:"Delete"},on:{click:function(s){return t.deleteServiceHistory(e,a.id)}}},[s("i",{staticClass:"fas fa-trash"})])],1)])}))],2)])]),t._v(" "),s("div",{staticClass:"col-12 d-flex mt-3 justify-content-center"},[s("pagination",{attrs:{data:t.serviceHistory},on:{"pagination-change-page":t.getServiceHistory}})],1)])])])]),t._v(" "),s("div",{staticClass:"col-md-7"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-body"},[t._m(5),t._v(" "),s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"table table-bordered"},[t._m(6),t._v(" "),s("tbody",[t.parts.length<=0?[t._m(7)]:t._l(t.parts,(function(a,e){return s("tr",{key:e},[s("td",[t._v(t._s(e+1))]),t._v(" "),s("td",[s("b",[t._v(t._s(a.name))])]),t._v(" "),s("td",[t._v(t._s(a.part_number))]),t._v(" "),s("td",[t._v(t._s(a.vendor))]),t._v(" "),s("td",["need_to_order"==a.status?s("span",{staticClass:"badge badge-warning"},[s("i",{staticClass:"fas fa-clock"}),t._v(" Need to order")]):"ordered"==a.status?s("span",{staticClass:"badge badge-pending"},[s("i",{staticClass:"fas fa-check"}),t._v(" Ordered")]):"shipped"==a.status?s("span",{staticClass:"badge badge-shipped"},[s("i",{staticClass:"fas fa-truck"}),t._v(" Shipped")]):"installed"==a.status?s("span",{staticClass:"badge badge-success"},[s("i",{staticClass:"fas fa-check-circle"}),t._v(" Installed")]):t._e()]),t._v(" "),s("td",["installed"==a.status?s("span",[t._v(t._s(t.moment(a.updated_at).format("MM-DD-YYYY")))]):s("span",[t._v("Not installed yet")])]),t._v(" "),s("td",[s("router-link",{staticClass:"btn btn-sm btn-secondary",attrs:{to:{name:"edit-part",params:{partId:a.id}}}},[t._v("View / Edit")])],1)])}))],2)])])])])])])}),[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"form-group"},[s("h5",[t._v("Machine Info")]),t._v(" "),s("hr")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"form-group text-center"},[s("h5",[t._v("Customer Info")]),t._v(" "),s("hr")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"form-group"},[s("h5",[t._v("Service History")]),t._v(" "),s("hr")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("thead",[s("tr",[s("th",[t._v("Date")]),t._v(" "),s("th",[t._v("Type")]),t._v(" "),s("th",[t._v("Tech Name")]),t._v(" "),s("th",[t._v("Action")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("tr",[s("td",{staticClass:"text-center text-danger",attrs:{colspan:"4"}},[t._v("No service record")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"form-group"},[s("h4",[s("i",{staticClass:"fas fa-check-circle"}),t._v(" Â  Installed Parts")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("thead",[s("tr",[s("th",[t._v("SL No.")]),t._v(" "),s("th",[t._v("Part name")]),t._v(" "),s("th",[t._v("Part number")]),t._v(" "),s("th",[t._v("vendor")]),t._v(" "),s("th",[t._v("status")]),t._v(" "),s("th",[t._v("Installation date")]),t._v(" "),s("th",[t._v("Action")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("tr",[s("td",{staticClass:"text-center",attrs:{colspan:"6"}},[s("span",{staticClass:"text-muted"},[t._v("No parts were assigned")])])])}],!1,null,null,null).exports}}]);