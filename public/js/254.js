"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[254],{2254:(t,s,e)=>{e.r(s),e.d(s,{default:()=>n});const a={data:function(){return{isLoading:!0,requests:[],moment}},methods:{getPartsRequest:function(){var t=this,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;axios.get("/admin/api/get-parts-request-data?page=".concat(s)).then((function(t){return t.data})).then((function(s){t.requests=s,t.isLoading=!1})).catch((function(t){console.error(t.response.data)}))},cancelPartRequest:function(t,s){var e=this;axios.post("/admin/api/cancel-part-request",{serviceId:t}).then((function(t){return t.data})).then((function(t){"ok"==t.status&&(e.requests.splice(s,1),swal.fire("Canceled",t.msg,"success"))})).catch((function(t){console.error(t.response.data)}))},changeStatus:function(t,s){var e=this;axios.post("/admin/api/complete-part-request",{historyId:t}).then((function(t){return t.data})).then((function(t){"ok"==t.status&&(swal.fire("Success",t.msg,"success"),e.requests.splice(s,1),1==$("#partReqCount").text()?$("#partReqCount").remove():$("#partReqCount").text($("#partReqCount").text()-1))})).catch((function(t){console.error(t.response.data)}))}},mounted:function(){this.getPartsRequest()}};const n=(0,e(1900).Z)(a,(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"content-header"},[e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"row mb-2"},[t._m(0),t._v(" "),e("div",{staticClass:"col-sm-6"},[e("ol",{staticClass:"breadcrumb float-sm-right"},[e("li",{staticClass:"breadcrumb-item"},[e("router-link",{attrs:{to:{name:"dashboard"}}},[t._v("Home")])],1),t._v(" "),e("li",{staticClass:"breadcrumb-item active"},[t._v("Parts Request")])])])])])])]),t._v(" "),e("div",{staticClass:"col-12"},[e("div",{staticClass:"card"},[t._m(1),t._v(" "),e("div",{staticClass:"card-body"},[t.isLoading?e("div",{staticClass:"row"},t._l(15,(function(t){return e("div",{key:t,staticClass:"col-md-12"},[e("skeleton",{attrs:{width:"100%",height:"25px"}})],1)})),0):e("div",{staticClass:"row"},[e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table table-hover table-bordered table-striped"},[t._m(2),t._v(" "),e("tbody",t._l(t.requests,(function(s,a){return e("tr",{key:a},[e("td",[e("b",[t._v(t._s(s.id))])]),t._v(" "),e("td",[e("span",{staticClass:"badge badge-pill badge-primary"},[t._v(t._s(s.machine.label_number))])]),t._v(" "),e("td",[t._v(t._s(s.description))]),t._v(" "),e("td",[t._v(t._s(t.moment(s.created_at).format("DD MMM YYYY - hh:mm A")))]),t._v(" "),e("td",[e("router-link",{staticClass:"btn btn-sm btn-primary",attrs:{to:{name:"add-parts",params:{serviceId:s.id}}}},[t._v("Add parts")]),t._v(" "),e("button",{staticClass:"btn btn-danger btn-sm",on:{click:function(e){return t.cancelPartRequest(s.id,a)}}},[t._v("Cancel")]),t._v(" "),e("button",{staticClass:"btn btn-sm btn-success",on:{click:function(e){return t.changeStatus(s.id,a)}}},[t._v("Mark as completed "),e("i",{staticClass:"fas fa-check-circle"})])],1)])})),0)])])])])])])])}),[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"col-sm-6"},[e("h1",{staticClass:"m-0"},[t._v("Dashboard")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"card-header"},[e("h4",[t._v("Parts Requests")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("thead",[e("tr",[e("th",[t._v("Service ID")]),t._v(" "),e("th",[t._v("Machine Label")]),t._v(" "),e("th",[t._v("Comments from tech")]),t._v(" "),e("th",[t._v("Request Date")]),t._v(" "),e("th",[t._v("Action")])])])}],!1,null,null,null).exports}}]);