"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[840],{1840:(t,a,e)=>{e.r(a),e.d(a,{default:()=>i});const s={data:function(){return{isLoading:!0,histories:[],paginateData:{},moment,startDate:"",endDate:"",filterMode:!1}},methods:{getHistories:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isLoading=!0,axios.get("/admin/api/get-service-history",{params:{page:a,startDate:this.startDate,endDate:this.endDate}}).then((function(t){return t.data})).then((function(a){console.log(a),t.histories=a.data,t.paginateData=a,t.isLoading=!1})).catch((function(t){console.error(t.response.data)}))},triggerFilter:function(){""!=this.startDate||""!=this.endDate?(this.filterMode=!0,this.getHistories()):(this.filterMode=!1,this.getHistories())},clearSearch:function(){this.filterMode=!1,this.startDate="",this.endDate="",this.getHistories()}},mounted:function(){this.getHistories()}};const i=(0,e(1900).Z)(s,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"row"},[t._m(0),t._v(" "),e("div",{staticClass:"col-12"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("h4",[t._v("List")]),t._v(" "),e("div",{staticClass:"col-12 mt-4"},[t._m(1),t._v(" "),e("hr"),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-6 col-md-3 form-group"},[e("label",{attrs:{for:""}},[t._v("Date starts from")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.startDate,expression:"startDate"}],staticClass:"form-control",attrs:{type:"date"},domProps:{value:t.startDate},on:{input:function(a){a.target.composing||(t.startDate=a.target.value)}}})]),t._v(" "),e("div",{staticClass:"col-6 col-md-3 form-group"},[e("label",{attrs:{for:""}},[t._v("Date ends at")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.endDate,expression:"endDate"}],staticClass:"form-control",attrs:{type:"date"},domProps:{value:t.endDate},on:{input:function(a){a.target.composing||(t.endDate=a.target.value)}}})]),t._v(" "),e("div",{staticClass:"col-12 form-group"},[e("button",{staticClass:"btn btn-sm btn-secondary",on:{click:t.triggerFilter}},[e("i",{staticClass:"fas fa-search"}),t._v(" Filter")])])])]),t._v(" "),e("hr"),t._v(" "),t.isLoading?e("div",{staticClass:"row"},t._l(10,(function(t){return e("div",{key:t,staticClass:"col-12 mb-2"},[e("skeleton",{attrs:{width:"100%",height:"30px"}})],1)})),0):e("div",{staticClass:"row"},[e("div",{staticClass:"w-100 text-right"},[t.filterMode?e("button",{staticClass:"btn btn-sm btn-danger ml-2 mr-2",on:{click:t.clearSearch}},[e("i",{staticClass:"fas fa-times"}),t._v(" Clear Search")]):t._e(),t._v(" "),t._m(2)]),t._v(" "),t.filterMode?t.filterMode&&""==t.startDate&&""!=t.endDate?e("p",{staticClass:"ml-2"},[t._v("\r\n                        Showing results before - "),e("b",[t._v(t._s(t.moment(t.endDate).format("DD MMMM YYYY")))])]):t.filterMode&&""!=t.startDate&&""==t.endDate?e("p",{staticClass:"ml-2"},[t._v("\r\n                        Showing results after - "),e("b",[t._v(t._s(t.moment(t.startDate).format("DD MMMM YYYY")))])]):t.filterMode&&""!=t.startDate&&""!=t.endDate?e("p",{staticClass:"ml-2"},[t._v("\r\n                        Showing results from "),e("b",[t._v(t._s(t.moment(t.startDate).format("DD MMMM YYYY")))]),t._v(", to \r\n                        "),e("b",[t._v(t._s(t.moment(t.endDate).format("DD MMMM YYYY")))])]):t._e():e("p",{staticClass:"ml-2"},[t._v("Showing recent results")]),t._v(" "),e("div",{staticClass:"col-12 mt-3"},[e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table table-bordered table-striped"},[t._m(3),t._v(" "),e("tbody",t._l(t.histories,(function(a,s){return e("tr",{key:s},[e("td",[t._v(t._s(a.id))]),t._v(" "),e("td",[e("span",{staticClass:"badge badge-primary"},[t._v(t._s(a.machine.label_number))])]),t._v(" "),e("td",[t._v(t._s(a.serviceType))]),t._v(" "),e("td",[t._v(t._s(a.techName))]),t._v(" "),e("td",[t._v(t._s(t.moment(a.serviceDate).format("DD MMMM YYYY")))]),t._v(" "),e("td",[e("router-link",{staticClass:"mb-2 btn btn-sm btn-success",attrs:{to:{name:"machine.serviceHistory",params:{machineId:a.machine.id,serviceId:a.id}}}},[e("i",{staticClass:"fas fa-eye"}),t._v(" View")]),t._v(" "),e("router-link",{staticClass:"mb-2 btn btn-sm btn-primary",attrs:{to:{name:"machine.info",params:{id:a.machine.id}}}},[t._v("Machine Info")])],1)])})),0)])])])]),t._v(" "),e("div",{staticClass:"d-flex justify-content-center"},[e("pagination",{attrs:{data:t.paginateData},on:{"pagination-change-page":t.getHistories}})],1)])])]),t._v(" "),e("div",{staticClass:"modal fade",staticStyle:{display:"none"},attrs:{id:"modal-lg","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-lg"},[e("div",{staticClass:"modal-content"},[t._m(4),t._v(" "),e("div",{staticClass:"modal-body"},[t._m(5),t._v(" "),e("p",[t._v("Type :   \r\n                    "),t.filterMode?t.filterMode&&""==t.startDate&&""!=t.endDate?e("span",{staticClass:"text-primary"},[t._v("\r\n                        Records before - "),e("b",[t._v(t._s(t.moment(t.endDate).format("DD MMMM YYYY")))])]):t.filterMode&&""!=t.startDate&&""==t.endDate?e("span",{staticClass:"text-primary"},[t._v("\r\n                        Records after - "),e("b",[t._v(t._s(t.moment(t.startDate).format("DD MMMM YYYY")))])]):t.filterMode&&""!=t.startDate&&""!=t.endDate?e("span",{staticClass:"text-primary"},[t._v("\r\n                        Records from "),e("b",[t._v(t._s(t.moment(t.startDate).format("DD MMMM YYYY")))]),t._v(", to \r\n                        "),e("b",[t._v(t._s(t.moment(t.endDate).format("DD MMMM YYYY")))])]):t._e():e("span",{staticClass:"text-primary"},[t._v("Recent Records")])]),t._v(" "),t._m(6)])])])])])}),[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-12"},[e("div",{staticClass:"content-header"},[e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"row mb-2"},[e("div",{staticClass:"col-sm-6"},[e("h1",{staticClass:"m-0"},[t._v("Recent Service Histories")])]),t._v(" "),e("div",{staticClass:"col-sm-6"},[e("ol",{staticClass:"breadcrumb float-sm-right"},[e("li",{staticClass:"breadcrumb-item"},[e("a",{attrs:{href:"#"}},[t._v("Home")])]),t._v(" "),e("li",{staticClass:"breadcrumb-item active"},[t._v("Recent Service History")])])])])])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("h6",{staticClass:"mb-4"},[e("b",[t._v("Show records in a specific date range")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("button",{staticClass:"btn btn-sm btn-info ml-2 mr-2",attrs:{"data-toggle":"modal","data-target":"#modal-lg"}},[e("i",{staticClass:"fas fa-download"}),t._v(" Export Excel")])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",[t._v("ID")]),t._v(" "),e("th",[t._v("Machine Label")]),t._v(" "),e("th",[t._v("Service Type")]),t._v(" "),e("th",[t._v("Tech Name")]),t._v(" "),e("th",[t._v("Service Date")]),t._v(" "),e("th",[t._v("Action")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-header"},[e("h4",{staticClass:"modal-title"},[t._v("Export current records to Excel")]),t._v(" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("h6",[e("b",[t._v("Export options :")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"row mt-5"},[e("div",{staticClass:"col-md-6 form-group mb-3"},[e("label",{attrs:{for:""}},[t._v("Choose how much data you want to export")]),t._v(" "),e("select",{staticClass:"form-control"},[e("option",{attrs:{value:""}},[t._v("Only Current page")]),t._v(" "),e("option",{attrs:{value:""}},[t._v("Everything")])])]),t._v(" "),e("div",{staticClass:"col-12 form-group mb-3 mt-4"},[e("button",{staticClass:"btn btn-success"},[t._v("Download Excel "),e("i",{staticClass:"fas fa-download"})])])])}],!1,null,null,null).exports}}]);