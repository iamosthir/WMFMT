"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[482],{4482:(t,e,a)=>{a.r(e),a.d(e,{default:()=>i});const s={data:function(){return{isLoading:!0,machines:{},moment,searchText:"",searchMode:!1}},methods:{getAllMachineList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isLoading=!0,axios.get("/admin/api/get-all-machine-list?page="+e+"&q="+this.searchText).then((function(t){return t.data})).then((function(e){t.machines=e,t.isLoading=!1})).catch((function(t){console.error(t.response.data)}))},deleteMachine:function(t,e){var a=this;swal.fire({title:"Are you sure?",text:"This will delete all service records as well",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(s){s.isConfirmed&&axios.post("/admin/api/delete-machine",{machineId:e}).then((function(t){return t.data})).then((function(e){console.log(e),"ok"==e.status&&(swal.fire("Success",e.msg,"success"),a.machines.data.splice(t,1))})).catch((function(t){console.error(t.response.data)}))}))},searchMachine:function(){""!=this.searchText?this.searchMode=!0:this.searchMode=!1,this.getAllMachineList()},cancelSearch:function(){this.searchText="",this.searchMode=!1,this.getAllMachineList()}},mounted:function(){this.getAllMachineList()}};const i=(0,a(1900).Z)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[t._m(0),t._v(" "),a("div",{staticClass:"col-12"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"row"},[a("form",{staticClass:"col-md-3",on:{submit:function(e){return e.preventDefault(),t.searchMachine()}}},[a("div",{staticClass:"input-group mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Search by serial number..."},domProps:{value:t.searchText},on:{input:function(e){e.target.composing||(t.searchText=e.target.value)}}}),t._v(" "),t._m(1)]),t._v(" "),t.searchMode?a("div",{staticClass:"form-group"},[a("p",[t._v("\r\n                                Search Result for : Â  "),a("span",{staticClass:"text-primary"},[t._v(t._s(t.searchText))]),t._v(" "),a("button",{staticClass:"btn text-danger",attrs:{type:"button",title:"Cancel Search"},on:{click:t.cancelSearch}},[a("i",{staticClass:"fas fa-times"})])])]):t._e()]),t._v(" "),a("div",{staticClass:"col-md-12 mt-3"},[a("h4",[t._v("List")]),t._v(" "),t.isLoading?a("div",{staticClass:"row"},t._l(10,(function(t){return a("div",{key:t,staticClass:"col-12 mb-2"},[a("skeleton",{attrs:{width:"100%",height:"30px"}})],1)})),0):[a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-striped table-hover table-bordered"},[t._m(2),t._v(" "),a("tbody",[0==t.machines.data.length?[t._m(3)]:t._l(t.machines.data,(function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(s+1))]),t._v(" "),a("td",[t._v(t._s(e.title))]),t._v(" "),a("td",[t._v(t._s(e.manufacturer))]),t._v(" "),a("td",[a("span",{staticClass:"badge badge-pill badge-warning"},[t._v(t._s(e.model))])]),t._v(" "),a("td",[a("span",{staticClass:"badge badge-pill badge-primary"},[t._v(t._s(e.bottom_sl))])]),t._v(" "),a("td",[a("span",{staticClass:"badge badge-pill badge-secondary"},[t._v(t._s(e.top_sl))])]),t._v(" "),a("td",[a("span",{staticClass:"badge badge-pill badge-success"},[t._v(t._s(e.label_number))])]),t._v(" "),a("td",[t._v(t._s(e.customer_name))]),t._v(" "),[null==e.last_service?a("td",[t._v("Never")]):a("td",[t._v(t._s(t.moment(e.last_service.created_at).format("MM / DD / YYYY")))])],t._v(" "),a("td",[a("button",{staticClass:"btn btn-sm btn-secondary dropdown-toggle",attrs:{type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v("\r\n                                                        Actions\r\n                                                    ")]),t._v(" "),a("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuButton"}},[a("router-link",{staticClass:"dropdown-item",attrs:{to:{name:"machine.info",params:{id:e.id}}}},[a("i",{staticClass:"fas fa-eye"}),t._v(" Details")]),t._v(" "),e.last_service?a("router-link",{staticClass:"dropdown-item",attrs:{to:{name:"machine.serviceHistory",params:{machineId:e.last_service.machine_id,serviceId:e.last_service.id}}}},[a("i",{staticClass:"fas fa-eye"}),t._v(" Last Service Details")]):t._e(),t._v(" "),a("router-link",{staticClass:"dropdown-item",attrs:{to:{name:"machine.service-record.add",params:{machineId:e.id}},href:"#"}},[a("i",{staticClass:"fas fa-plus"}),t._v(" Add Service Record")]),t._v(" "),a("router-link",{staticClass:"dropdown-item text-warning",attrs:{to:{name:"machine.edit",params:{id:e.id}}}},[a("i",{staticClass:"fas fa-edit"}),t._v(" Edit Machine Info")])],1),t._v(" "),a("button",{staticClass:"btn btn-sm btn-danger",on:{click:function(a){return t.deleteMachine(s,e.id)}}},[a("i",{staticClass:"fas fa-trash"}),t._v(" Delete")])])],2)}))],2)])])]],2)]),t._v(" "),a("div",{staticClass:"d-flex justify-content-center"},[a("pagination",{attrs:{data:t.machines},on:{"pagination-change-page":t.getAllMachineList}})],1)])])])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-12"},[a("div",{staticClass:"content-header"},[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row mb-2"},[a("div",{staticClass:"col-sm-6"},[a("h1",{staticClass:"m-0"},[t._v("All Machines List")])]),t._v(" "),a("div",{staticClass:"col-sm-6"},[a("ol",{staticClass:"breadcrumb float-sm-right"},[a("li",{staticClass:"breadcrumb-item"},[a("a",{attrs:{href:"#"}},[t._v("Home")])]),t._v(" "),a("li",{staticClass:"breadcrumb-item active"},[t._v("Machine List")])])])])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[e("i",{staticClass:"fas fa-search"})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("#")]),t._v(" "),a("th",[t._v("Title")]),t._v(" "),a("th",[t._v("Manufacturer")]),t._v(" "),a("th",[t._v("Model")]),t._v(" "),a("th",[t._v("Bottom SL")]),t._v(" "),a("th",[t._v("Top SL")]),t._v(" "),a("th",[t._v("Label Number")]),t._v(" "),a("th",[t._v("Customer Name")]),t._v(" "),a("th",[t._v("Last Service Date")]),t._v(" "),a("th",[t._v("Action")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticClass:"text-center text-danger",attrs:{colspan:"10"}},[t._v("No listed machine was found")])])}],!1,null,null,null).exports}}]);